
// Create a new browser bookmark and paste this entire code into its URL field.
// this helps add / remove unitlib classes metadata

javascript:(function(){if(typeof editor==='undefined'){console.log('editor not found');return;}const s=editor.getSelected?.();const e=s?.getEl?.();function r(x){if(!x)return false;if(!(x instanceof HTMLElement))return false;if(x.hasAttribute('data-type'))return false;if(x.hasAttribute('data-field'))return false;if(x.hasAttribute('data-roottype'))return false;return true;}function h(x){return x?.hasAttribute('data-type')||x?.hasAttribute('data-field')||x?.hasAttribute('data-roottype');}const o=document.getElementById('blazar-tool-overlay');if(o)o.remove();const y=document.createElement('div');y.id='blazar-tool-overlay';y.style.position='fixed';y.style.inset='0';y.style.background='rgba(0,0,0,0.4)';y.style.zIndex='999999';y.style.display='flex';y.style.alignItems='center';y.style.justifyContent='center';const b=document.createElement('div');b.style.background='white';b.style.padding='12px';b.style.minWidth='320px';b.style.font='17px monospace';b.style.color='black';b.style.borderRadius='6px';b.style.boxShadow='0 0 12px rgba(0,0,0,0.25)';function c(){y.remove();}function styleBtn(btn){btn.style.background='#e6e6e6';btn.style.border='1px solid #ccc';btn.style.padding='4px 10px';btn.style.borderRadius='4px';btn.style.cursor='pointer';}if(r(e)){const m=document.createElement('div');m.textContent='Add Unit Data';m.style.marginBottom='10px';const t=document.createElement('input');t.placeholder='Class';t.size=30;t.style.marginBottom='6px';t.style.fontSize='16px';const f=document.createElement('input');f.placeholder='Field';f.size=30;f.style.marginBottom='10px';f.style.fontSize='16px';const R=document.createElement('div');R.style.display='flex';R.style.justifyContent='flex-end';R.style.gap='6px';const A=document.createElement('button');A.textContent='Apply';styleBtn(A);const C=document.createElement('button');C.textContent='Cancel';styleBtn(C);C.onclick=c;A.onclick=function(){const T=t.value.trim(),F=f.value.trim();if(!T||!F)return;s.addAttributes({'data-type':T,'data-field':F});c();};R.appendChild(C);R.appendChild(A);b.appendChild(m);b.appendChild(t);b.appendChild(f);b.appendChild(R);y.appendChild(b);document.body.appendChild(y);return;}if(!e||( !(e instanceof HTMLElement) )){const m=document.createElement('div');m.textContent='No selection available';m.style.marginBottom='10px';const C=document.createElement('button');C.textContent='Close';styleBtn(C);C.onclick=c;b.appendChild(m);b.appendChild(C);y.appendChild(b);document.body.appendChild(y);return;}if(h(e)){const m=document.createElement('div');m.textContent='Object already has unit attributes';m.style.marginBottom='10px';const R=document.createElement('div');R.style.display='flex';R.style.justifyContent='flex-end';R.style.gap='6px';const C=document.createElement('button');C.textContent='Close';styleBtn(C);C.onclick=c;const D=document.createElement('button');D.textContent='Remove Current';styleBtn(D);D.onclick=function(){s.removeAttributes(['data-type','data-field','data-roottype']);c();};R.appendChild(C);R.appendChild(D);b.appendChild(m);b.appendChild(R);y.appendChild(b);document.body.appendChild(y);return;}})();



