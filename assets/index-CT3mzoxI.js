const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AnimationFX-DLA-EGvI.js","assets/Coroutine-nyZtcbpY.js","assets/Time-DJp_3Awj.js","assets/ColorArray-A9wlHJJQ.js","assets/FormUnit-CsnC4QX1.js","assets/FlickerWave-C2_OFYdl.js","assets/MoodColors-BKpX6yfj.js","assets/SlidersHSV-CTaloNcV.js","assets/ColorItem-BZAdLnGS.js","assets/InputUnit-DhQHcrx3.js","assets/Color-DjessYRo.js","assets/DeckView-bANqNoAB.js","assets/LampView-GjY6VuEx.js","assets/ViewUnit-Bhn_HH9g.js","assets/ButtonsRow-3E2nDFtN.js","assets/ButtonsRowSig-DiCz5Lfc.js","assets/Checkbox-BCd17yHi.js","assets/Dropdown-Mqm5V2-T.js","assets/Numeral-C9VTNK6M.js","assets/Slider-CUsQ2Bf9.js"])))=>i.map(i=>d[i]);
!function polyfill(){const t=document.createElement("link").relList;if(!(t&&t.supports&&t.supports("modulepreload"))){for(const t of document.querySelectorAll('link[rel="modulepreload"]'))processPreload(t);new MutationObserver(t=>{for(const e of t)if("childList"===e.type)for(const t of e.addedNodes)"LINK"===t.tagName&&"modulepreload"===t.rel&&processPreload(t)}).observe(document,{childList:!0,subtree:!0})}function processPreload(t){if(t.ep)return;t.ep=!0;const e=function getFetchOpts(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),"use-credentials"===t.crossOrigin?e.credentials="include":"anonymous"===t.crossOrigin?e.credentials="omit":e.credentials="same-origin",e}(t);fetch(t.href,e)}}();const t={},e=function preload(e,o,r){let s=Promise.resolve();if(o&&o.length>0){let allSettled=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),r=e?.nonce||e?.getAttribute("nonce");s=allSettled(o.map(e=>{if((e=function(t){return"/web-blazar/"+t}(e))in t)return;t[e]=!0;const o=e.endsWith(".css"),s=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${s}`))return;const i=document.createElement("link");return i.rel=o?"stylesheet":"modulepreload",o||(i.as="script"),i.crossOrigin="",i.href=e,r&&i.setAttribute("nonce",r),document.head.appendChild(i),o?new Promise((t,o)=>{i.addEventListener("load",t),i.addEventListener("error",()=>o(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function handlePreloadError(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&handlePreloadError(e.reason);return e().catch(handlePreloadError)})};class RequestDispatcher{static process(t){log(`ba url ${t}`)}}const o=Object.freeze(Object.defineProperty({__proto__:null,RequestDispatcher:RequestDispatcher},Symbol.toStringTag,{value:"Module"}));class Unit{get root(){return this._root}get parentUnit(){return this._parU}get domPath(){return Unit.elementDomPath(this._root)}get typeName(){return this.constructor.name}constructor(t){this._root=t}get isVisible(){return"none"!==getComputedStyle(this._root).display}set isVisible(t){this._root.style.display=t?"flex":"none"}show(){this.isVisible=!0}hide(){this.isVisible=!1}reportsTo(t){Assert.Defined(t),this._parU=t}propagateURL(t){const e=`${this.typeName}/${t}`;this.parentUnit?this.parentUnit.propagateURL(e):RequestDispatcher.process(e)}dispose(){this.root.remove(),this._parU=null}static Find(t,e){if(!e)throw new Error("selector argument should be a non-empty string");if(!t)throw new Error("root argument was null");const o=t.querySelector(e);if(!o)throw new Error(`root element has no child with selector '${e}'\nroot path:'${Unit.elementDomPath(t)}'`);return o}static FindAll(t,e){if(!e)throw new Error("selector argument should be a non-empty string");if(!t)throw new Error("root argument was null");const o=t.querySelectorAll(e);if(!o||0===o.length)throw new Error(`root element has no children with selector '${e}'\nroot path:'${Unit.elementDomPath(t)}'`);return Array.from(o)}static FindWithTag(t,e){if(!e)throw new Error("tag can't be empty");if(!t)throw new Error("root dom element can't be null");const o=t.querySelector(`[data-tag="${e}"]`);if(!o)throw new Error(`not found in DOM: child with tag '${e}' in parent ${Unit.elementDomPath(t)}`);return o}static elementDomPath(t){const e=[];let o=t;for(;o;)e.push(o.tagName.toLocaleLowerCase()),o=o.parentElement;const r=t.id?` [${t.id}]`:"";return e.reverse().join("/")+r}}const r=Object.freeze(Object.defineProperty({__proto__:null,Unit:Unit},Symbol.toStringTag,{value:"Module"})),s={};function log(t,e=!1){console.log(`${t}`),e&&console.trace()}function logi(t){const e=(new Error(t).stack.split("\n")[2]??"").match(/at\s+([^\s(]+)/),o=e?e[1]:"unknown";console.log(`[${o}]: ${t}`)}function err(t){const e=new Error(t),o=(e.stack.split("\n")[2]??"").match(/at\s+([^\s(]+)/),r=o?o[1]:"unknown";throw e.message=`[${r}] ${t}`,e}class Assert{static True(t,e="Condition was false"){t||err(e)}static False(t,e="Condition was true"){t&&err(e)}static Index(t,e){(e<0||e>=t.length)&&err(`Index out of range: ${t.length}[${e}]`)}static Defined(t){t||err("object was undefined or null")}static IsType(t,e){if(t instanceof e)return;const o=t?.constructor?.name??typeof t;err(`Type mismatch: expected ${e.name}, got ${o}`)}static IsArray(t,e){Array.isArray(t)||err("The object is not an array"),void 0===e?0===t.length&&err("The array is empty"):t.length!==e&&err(`Expected array length ${e}, got ${t.length}`)}}const i=Object.freeze(Object.defineProperty({__proto__:null,Assert:Assert},Symbol.toStringTag,{value:"Module"}));class CompositeUnit extends Unit{constructor(){super(...arguments),this.fields={}}attachClassField(t,e){Assert.True(!!t,"filedName was empty"),Assert.True(!this.fields[t],`duplicate of '${t}'`),this.fields[t]=e,log(`\t\tÂ·${this.typeName}.${t} field added`)}onObjectConstructed(){this.initializeClassFields(),this.initializeEvents()}getField(t){const e=this.fields[t];return Assert.False(!e,`no filed '${this.typeName}.${t}' was found (refactored?) Available: [${Object.keys(this.fields).join(", ")}]`),e}}const n=Object.freeze(Object.defineProperty({__proto__:null,CompositeUnit:CompositeUnit},Symbol.toStringTag,{value:"Module"}));class ViewsManager extends CompositeUnit{initializeClassFields(){this.viewsSelect=this.getField("viewsSelect"),this.viewsRoot=this.getField("viewsRoot")}initializeEvents(){this.viewsSelect.callback=t=>this.viewsRoot.activeIdx=t,this.viewsSelect.invokeOnChange(1)}}const a=Object.freeze(Object.defineProperty({__proto__:null,ViewsManager:ViewsManager},Symbol.toStringTag,{value:"Module"})),l=class _Application{static getSingleton(t){const e=_Application.rootMap.get(t);if(!e)throw new Error(`Controller of type '${t.name}' not in registry`);return e}static bindKeyAction(t){window.addEventListener("keydown",e=>{e.repeat||t(e.key)})}static async initialize(...t){await async function buildUnitRegistry(){const t=Object.assign({"../../src/BlazarApp.ts":()=>e(()=>Promise.resolve().then(()=>p),void 0),"../../src/anim/AnimationFX.ts":()=>e(()=>import("./AnimationFX-DLA-EGvI.js"),__vite__mapDeps([0,1,2])),"../../src/forms/ColorArray.ts":()=>e(()=>import("./ColorArray-A9wlHJJQ.js"),__vite__mapDeps([3,4])),"../../src/forms/FlickerWave.ts":()=>e(()=>import("./FlickerWave-C2_OFYdl.js"),__vite__mapDeps([5,4])),"../../src/forms/MoodColors.ts":()=>e(()=>import("./MoodColors-BKpX6yfj.js"),__vite__mapDeps([6,4])),"../../src/forms/SlidersHSV.ts":()=>e(()=>import("./SlidersHSV-CTaloNcV.js"),__vite__mapDeps([7,4])),"../../src/inputs/ColorItem.ts":()=>e(()=>import("./ColorItem-BZAdLnGS.js"),__vite__mapDeps([8,9,10])),"../../src/utils/Color.ts":()=>e(()=>import("./Color-DjessYRo.js"),[]),"../../src/views/DeckView.ts":()=>e(()=>import("./DeckView-bANqNoAB.js"),__vite__mapDeps([11,0,1,2])),"../../src/views/LampView.ts":()=>e(()=>import("./LampView-GjY6VuEx.js"),__vite__mapDeps([12,13,4])),"../../src/views/SettingsView.ts":()=>e(()=>import("./SettingsView-Mg6qUyAG.js"),[]),"../../src/views/ViewsManager.ts":()=>e(()=>Promise.resolve().then(()=>a),void 0),"../../src/vite-env.d.ts":()=>e(()=>Promise.resolve().then(()=>d),void 0),"../containers/CompositeUnit.ts":()=>e(()=>Promise.resolve().then(()=>n),void 0),"../containers/Container.ts":()=>e(()=>import("./Container-D1KXA4ig.js"),[]),"../containers/FormUnit.ts":()=>e(()=>import("./FormUnit-CsnC4QX1.js"),[]),"../containers/ViewUnit.ts":()=>e(()=>import("./ViewUnit-Bhn_HH9g.js"),__vite__mapDeps([13,4])),"./Assert.ts":()=>e(()=>Promise.resolve().then(()=>i),void 0),"./Time.ts":()=>e(()=>import("./Time-DJp_3Awj.js"),[]),"./Unit.ts":()=>e(()=>Promise.resolve().then(()=>r),void 0),"./aliases.ts":()=>e(()=>Promise.resolve().then(()=>u),void 0),"../inputs/ButtonsRow.ts":()=>e(()=>import("./ButtonsRow-3E2nDFtN.js"),__vite__mapDeps([14,9])),"../inputs/ButtonsRowSig.ts":()=>e(()=>import("./ButtonsRowSig-DiCz5Lfc.js"),__vite__mapDeps([15,14,9])),"../inputs/Checkbox.ts":()=>e(()=>import("./Checkbox-BCd17yHi.js"),__vite__mapDeps([16,9])),"../inputs/Dropdown.ts":()=>e(()=>import("./Dropdown-Mqm5V2-T.js"),__vite__mapDeps([17,9])),"../inputs/InputUnit.ts":()=>e(()=>import("./InputUnit-DhQHcrx3.js"),[]),"../inputs/Numeral.ts":()=>e(()=>import("./Numeral-C9VTNK6M.js"),__vite__mapDeps([18,9])),"../inputs/Slider.ts":()=>e(()=>import("./Slider-CUsQ2Bf9.js"),__vite__mapDeps([19,9])),"../static/Application.ts":()=>e(()=>Promise.resolve().then(()=>_),void 0),"../static/Coroutine.ts":()=>e(()=>import("./Coroutine-nyZtcbpY.js"),__vite__mapDeps([1,2])),"../static/RequestDispatcher.ts":()=>e(()=>Promise.resolve().then(()=>o),void 0)}),l=Object.values(t).map(t=>t().then(t=>{for(const e in t){const o=t[e];"function"==typeof o&&(s[o.name]=o)}}));await Promise.all(l),s[Unit.name]=Unit}(),logi(`classes in global registry:\n[${Object.keys(s)}]`),Assert.True(0===this.rootMap.size),Assert.IsArray(t),logi("initializing ..."),this.buildRootUnits(t),this.buildAutoUnits(),logi("... all done")}static cloneUnit(t,e,o){Assert.Defined(t);const r=t.root.cloneNode(!0);o.appendChild(r);const s=new(0,t.constructor)(r);return s.reportsTo(e),this.recursiveBuildUnit(s,s.root,0),s instanceof CompositeUnit&&s.onObjectConstructed(),s}static removeUnit(t){Assert.Defined(t),t.dispose()}static buildRootUnits(t){log("searching of DOM root Unit(s)");for(const e of t){log(`@ ${e.name}`);const t=Array.from(document.querySelectorAll(`[data-roottype="${e.name}"]`));0===t.length&&err(`no [data-roottype=${e.name}] found in DOM`);const o=new e(t[0]);this.rootMap.set(e,o)}Assert.True(this.rootMap.size>0),log(`total ${this.rootMap.size} root Unit object(s)`)}static buildAutoUnits(){log("auto-discovering of Unit(s)");for(const[t,e]of this.rootMap)log(`+ [M]${t.name}`),this.recursiveBuildUnit(e,e.root,0),e instanceof CompositeUnit&&e.onObjectConstructed()}static recursiveBuildUnit(t,e,o){for(const r of Array.from(e.children,t=>t)){const e=r.dataset.type,i=r.dataset.field,n=Unit.elementDomPath(r);if(e){Assert.False(!i,`Dom el. ${n} declared type '${e}' but is missing 'data-field' attribute`);const a=s[e];a||err(`DOM el. ${n} attached type '${e}' that is NOT part of Unit family ctors`),log("    ".repeat(o+1)+`+ ${e}`);const l=new a(r);l.reportsTo(t),this.recursiveBuildUnit(l,r,o+1),l instanceof CompositeUnit&&l.onObjectConstructed(),"none"!==i&&this.findCompositeParent(l).attachClassField(i,l)}else this.recursiveBuildUnit(t,r,o+1)}}static findCompositeParent(t){let e=t.parentUnit;for(;;){if(e||err(`DOM el. ${t.domPath} does not have a parent that is ${CompositeUnit.name}`),e instanceof CompositeUnit)return e;e=e.parentUnit}}};l.rootMap=new Map;let c=l;const _=Object.freeze(Object.defineProperty({__proto__:null,Application:c},Symbol.toStringTag,{value:"Module"}));class BlazarApp extends c{static async Run(){await BlazarApp.initialize(ViewsManager),BlazarApp.bindKeyboard(),this.mainPager=c.getSingleton(ViewsManager)}static bindKeyboard(){c.bindKeyAction(t=>{const e=c.getSingleton(ViewsManager);"t"===t&&(e.isVisible=!e.isVisible)})}}!async function main(){await BlazarApp.Run()}();const p=Object.freeze(Object.defineProperty({__proto__:null,BlazarApp:BlazarApp},Symbol.toStringTag,{value:"Module"})),d=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),u=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{c as A,CompositeUnit as C,Unit as U,Assert as a};
