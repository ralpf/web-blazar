import{FormUnit as t}from"./FormUnit-DM_Lse57.js";import{A as i}from"./index-BAnrADdp.js";class ColorArray extends t{constructor(){super(...arguments),this.all=[],this.limit=16}get count(){return this.all.length}initializeClassFields(){this.prototype=this.getField("prototype"),this.container=this.prototype.root.parentElement,this.prototype.root.remove(),this.cloneTemplate(0),this.checkAuxButtonsVisibility()}initializeEvents(){}cloneTemplate(t){const e=i.cloneUnit(this.prototype,this,this.container),o=this.container.children[t+1]??null;this.container.insertBefore(e.root,o),e.onAddItem=this.onAddItemClicked.bind(this),e.onDelItem=this.onDelItemClicked.bind(this),e.callback=this.onAnythingChanged.bind(this),this.all.splice(t+1,0,e),e.setRandomColor()}checkAuxButtonsVisibility(){const t=this.count>1,i=this.count<this.limit;this.all.forEach(e=>{e.setDelButtonVisible(t),e.setAddButtonVisible(i)})}onAddItemClicked(t){let i=0;for(;i<this.count&&this.container.children[i]!==t.root;++i);this.cloneTemplate(i),this.checkAuxButtonsVisibility(),this.onAnythingChanged()}onDelItemClicked(t){i.removeUnit(t),this.all=this.all.filter(i=>i!==t),this.checkAuxButtonsVisibility(),this.onAnythingChanged()}onAnythingChanged(){const t=this.all.map(t=>`col=${t.getColorString()}`).join("&").replace(/#/g,"");this.propagateURL(t)}}export{ColorArray};
