import{C as s,U as e,l as o}from"./index-DOIGRhD_.js";class DevView extends s{initializeClassFields(){this.logLines=e.FindWithTag(this.root,"logRoot"),this.wsocketOnOf=e.FindWithTag(this.root,"ws-on-off");const s=`ws://${window.location.host}/log`;s.includes("127.0.0.1")||s.includes("localhost")?(o("[WebSocket] disabled for localhost"),this.ws=null):(o(`[WebSocket] will use url: ${s}`),this.ws=new WebSocket(s))}initializeEvents(){this.ws&&(this.ws.onopen=()=>{o("[WebSocket] Connect OK"),this.wsocketOnOf.style.backgroundColor="rgba(0, 168, 0, 1)"},this.ws.onclose=()=>{o("[WebSocket] disconnected"),this.wsocketOnOf.style.backgroundColor="rgba(168, 0, 0, 1)"},this.ws.onmessage=s=>{const e=String(s.data);o(`[WebSocket] ${e}`);const t=this.logLines.firstElementChild.cloneNode(!0),i=(new Date).toLocaleTimeString("en-GB",{hour12:!1});t.textContent=`${i}: ${e}`,this.logLines.appendChild(t),this.logLines.scrollTop=this.logLines.scrollHeight},window.addEventListener("beforeunload",()=>this.ws?.close()))}}export{DevView};
